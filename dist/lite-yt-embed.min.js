"use strict";class LiteYTEmbed extends HTMLElement{constructor(){super(...arguments),this.videoId="",this.t="",this.i="",this.h="",this.o="",this.l=""}static get observedAttributes(){return["videoid","playlistid","playlabel","showtitle","params"]}static p(){var t=document.createElement("canvas");return null!=t.getContext?.("2d")&&0===t.toDataURL("image/webp").indexOf("data:image/webp")}static u(){LiteYTEmbed.m||(["https://www.youtube-nocookie.com","https://www.google.com","https://googleads.g.doubleclick.net","https://static.doubleclick.net"].forEach(t=>{var i=document.createElement("link");i.rel="preconnect",i.href=t,document.head.append(i)}),LiteYTEmbed.m=!0)}connectedCallback(){if(this.isConnected&&!0!==this.v){window.LiteYTEmbedConfig=window.LiteYTEmbedConfig??{},void 0===LiteYTEmbed.g&&(LiteYTEmbed.g=LiteYTEmbed.p()),this.videoId=this.getAttribute("videoid")??"",this.t=this.getAttribute("playlistid")??"";let t=this.querySelector(".lyt-playbtn"),i=(null==t&&((t=document.createElement("button")).type="button",t.className="lyt-playbtn",this.append(t)),t.querySelector("span"));null==i&&((i=document.createElement("span")).className="lyt-visually-hidden",t.append(i)),i.textContent=window.LiteYTEmbedConfig?.playLabel??"Play",t.removeAttribute("href"),t.removeAttribute("target"),this.T(),this.addEventListener("pointerover",LiteYTEmbed.u,{once:!0}),this.addIframe=this.addIframe.bind(this),this.addEventListener("click",()=>{this.addIframe()}),void 0===LiteYTEmbed.L&&(LiteYTEmbed.L=window.LiteYTEmbedConfig.forceApi??(navigator.vendor.includes("Apple")||navigator.userAgent.includes("Mobi"))),this.v=!0,["playlabel","showtitle","params"].forEach(t=>{null==this.getAttribute(t)&&this.attributeChangedCallback(t)})}}attributeChangedCallback(t,s=null,e=null){if(s!==e||null===s)if("playlabel"===t)s=window.LiteYTEmbedConfig?.playLabel??"Play",this.l=e??s,null!=(h=this.querySelector(".lyt-playbtn span"))&&(h.textContent=this.l),null!=(h=this.querySelector(".lyt-title span"))&&(h.textContent=this.l!==s?e:""),null!=(h=this.querySelector(".lyt-poster"))&&(h.setAttribute("alt",this.l),h.setAttribute("title",this.l)),null!=(s=this.querySelector("iframe"))&&s.setAttribute("title",this.l);else{if("showtitle"!==t)return"videoid"===t?(this.videoId=e??"",this.classList.contains("lyt-activated")&&""===this.t&&""!==this.videoId?void this.addIframe(!0):void 0):"playlistid"===t?(this.t=e??"",!this.classList.contains("lyt-activated")||""===this.t&&""===this.videoId?void 0:void this.addIframe(!0)):void("params"===t&&this.classList.contains("lyt-activated")&&(this.api=void 0,this.querySelector("iframe")?.remove(),this.addIframe(!0)));{var h=e??window.LiteYTEmbedConfig?.showTitle??"no";let i=this.querySelector(".lyt-title");if("yes"!==h)null!=i&&i.remove();else{null==i&&((i=document.createElement("div")).className="lyt-title",this.append(i));let t=i.querySelector("span");null==t&&(t=document.createElement("span"),i.append(t));s=window.LiteYTEmbedConfig?.playLabel??"Play";t.textContent=this.l!==s?this.l:""}}}}addIframe(s=!1){if(s||!this.classList.contains("lyt-activated")){this.classList.add("lyt-activated");s=new URLSearchParams(this.getAttribute("params")??window.LiteYTEmbedConfig?.params??"");if(s.append("autoplay","1"),s.append("playsinline","1"),""!==window.location.host&&s.append("origin",window.location.origin),!0===LiteYTEmbed.L)this.Y(s);else{let t=this.querySelector("iframe"),i=!1;null==t&&(i=!0,(t=document.createElement("iframe")).width="560",t.height="315",t.title=this.l,t.allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",t.allowFullscreen=!0,t.fetchPriority="high",this.append(t)),""!==this.t?t.src=`https://www.youtube-nocookie.com/embed/videoseries?list=${this.t}&`+s.toString():t.src=`https://www.youtube-nocookie.com/embed/${this.videoId}?`+s.toString(),t.focus(),i&&this.dispatchEvent(new CustomEvent("ready"))}}}T(){var t,i;null==this.querySelector(".lyt-poster-container")&&(this.i=this.getAttribute("size")??window.LiteYTEmbedConfig?.size??"hq",["mq","hq","sd","maxres"].includes(this.i))&&(this.h=this.getAttribute("jpg")??"",this.o=this.getAttribute("webp")??window.LiteYTEmbedConfig?.o??"yes",""===this.videoId&&""===this.h||(LiteYTEmbed.g||(this.o="no"),(t=document.createElement("picture")).className="lyt-poster-container","no"!==this.o&&((i=document.createElement("source")).setAttribute("type","image/webp"),i.setAttribute("srcset","yes"===this.o?`https://i.ytimg.com/vi_webp/${this.videoId}/${this.i}default.webp`:this.o),t.appendChild(i)),this.$=document.createElement("img"),this.$.setAttribute("decoding","async"),this.$.setAttribute("loading","lazy"),this.k(),this.$.setAttribute("src",""!==this.h?this.h:`https://i.ytimg.com/vi/${this.videoId}/${this.i}default.jpg`),this.$.setAttribute("alt",this.l),this.$.setAttribute("title",this.l),this.$.className="lyt-poster",!0===window.LiteYTEmbedConfig?.useFallback&&(this.classList.add("lyt-poster-hidden"),this.P=this.P.bind(this),this.j=this.j.bind(this),this.$.complete&&this.P(),this.$.addEventListener("load",this.P),this.$.addEventListener("error",this.j)),t.appendChild(this.$),this.append(t)))}k(){let t,i;switch(this.i){case"mq":t=320,i=180;break;case"hq":t=480,i=360;break;case"sd":t=640,i=480;break;default:t=1280,i=720}this.$?.setAttribute("width",t.toString()),this.$?.setAttribute("height",i.toString())}q(){switch(this.i){case"maxres":return this.i="sd",!0;case"sd":return this.i="hq",!0}return!1}P(){(this.$?.naturalWidth??0)<=120?this.j():this.classList.remove("lyt-poster-hidden")}j(){var t=this.querySelector("source");if(null!=t)return"yes"!==this.o?(this.o="yes",void t.setAttribute("srcset",`https://i.ytimg.com/vi_webp/${this.videoId}/${this.i}default.webp`)):this.q()?(this.k(),void t.setAttribute("srcset",`https://i.ytimg.com/vi_webp/${this.videoId}/${this.i}default.webp`)):(t.remove(),this.o="no",void this.$?.setAttribute("src",`https://i.ytimg.com/vi/${this.videoId}/${this.i}default.jpg`));""!==this.h?(this.h="",this.$?.setAttribute("src",`https://i.ytimg.com/vi/${this.videoId}/${this.i}default.jpg`)):this.q()&&(this.k(),this.$?.setAttribute("src",`https://i.ytimg.com/vi/${this.videoId}/${this.i}default.jpg`))}async Y(t){var i,s;await this.C(),this.api?""===this.t?this.api.loadVideoById(this.videoId):this.api.loadPlaylist({list:this.t,listType:"playlist"}):(i=document.createElement("div"),this.append(i),s={width:"100%",host:"https://www.youtube-nocookie.com",events:{onReady:t=>{this.api=t.target,this.api.playVideo(),this.dispatchEvent(new CustomEvent("ready"))}}},""===this.t?s.videoId=this.videoId:(t.append("listType","playlist"),t.append("list",this.t)),s.playerVars=Object.fromEntries(t.entries()),new YT.Player(i,s))}C(){if(void 0===window.YT)return new Promise((t,i)=>{var s=document.createElement("script");s.src="https://www.youtube.com/iframe_api",s.async=!0,s.onload=()=>{window.YT?.ready(t)},s.onerror=i,this.append(s)})}}LiteYTEmbed.m=!1,customElements.define("lite-youtube",LiteYTEmbed);
//# sourceMappingURL=lite-yt-embed.min.js.map