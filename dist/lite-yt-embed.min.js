"use strict";class LiteYTEmbed extends HTMLElement{constructor(){super(...arguments),this.videoId="",this.playlistId="",this.size="",this.jpg="",this.webp="",this.t=""}static i(){var t=document.createElement("canvas");return null!=t.getContext?.("2d")&&0===t.toDataURL("image/webp").indexOf("data:image/webp")}static h(){LiteYTEmbed.o||(LiteYTEmbed.l("preconnect","https://www.youtube-nocookie.com"),LiteYTEmbed.l("preconnect","https://www.google.com"),LiteYTEmbed.l("preconnect","https://googleads.g.doubleclick.net"),LiteYTEmbed.l("preconnect","https://static.doubleclick.net"),LiteYTEmbed.o=!0)}static l(t,i){var s=document.createElement("link");s.rel=t,s.href=i,document.head.append(s)}connectedCallback(){if(this.isConnected&&!0!==this.m){window.LiteYTEmbedConfig=window.LiteYTEmbedConfig??{},this.videoId=this.getAttribute("videoid")??"",this.playlistId=this.getAttribute("playlistid")??"";let t=this.querySelector(".lyt-playbtn");var i;if(this.t=t?.textContent?.trim()??this.getAttribute("playlabel")??window.LiteYTEmbedConfig.playLabel??"Play","yes"===(this.getAttribute("showtitle")??window.LiteYTEmbedConfig.showTitle??"no")){let t=this.querySelector(".lyt-title");null==t&&((t=document.createElement("div")).className="lyt-title",this.append(t)),""===(t.textContent??"")&&((i=document.createElement("span")).textContent=this.t,t.append(i))}this.p(),null==t&&((t=document.createElement("button")).type="button",t.className="lyt-playbtn",this.append(t)),""===(t.textContent??"")&&((i=document.createElement("span")).className="lyt-visually-hidden",i.textContent=this.t,t.append(i)),t.removeAttribute("href"),t.removeAttribute("target"),this.addEventListener("pointerover",LiteYTEmbed.h,{once:!0}),this.addEventListener("click",this.addIframe),void 0===LiteYTEmbed.u&&(LiteYTEmbed.u=window.LiteYTEmbedConfig.forceApi??(navigator.vendor.includes("Apple")||navigator.userAgent.includes("Mobi"))),this.m=!0}}addIframe(){var t,i;this.classList.contains("lyt-activated")||(this.classList.add("lyt-activated"),(t=new URLSearchParams(this.getAttribute("params")??window.LiteYTEmbedConfig?.params??"")).append("autoplay","1"),t.append("playsinline","1"),""!==window.location.host&&t.append("origin",window.location.origin),!0===LiteYTEmbed.u?this.v(t):((i=document.createElement("iframe")).width="560",i.height="315",i.title=this.t,i.allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",i.allowFullscreen=!0,i.fetchPriority="high",""!==this.playlistId?i.src=`https://www.youtube-nocookie.com/embed/videoseries?list=${this.playlistId}&`+t.toString():i.src=`https://www.youtube-nocookie.com/embed/${this.videoId}?`+t.toString(),this.append(i),i.focus(),this.dispatchEvent(new CustomEvent("ready"))))}p(){var t,i;null==this.querySelector(".lyt-poster-container")&&(this.size=this.getAttribute("size")??window.LiteYTEmbedConfig?.size??"hq",["mq","hq","sd","maxres"].includes(this.size))&&(this.jpg=this.getAttribute("jpg")??"",this.webp=this.getAttribute("webp")??window.LiteYTEmbedConfig?.webp??"yes",void 0===LiteYTEmbed.g&&(LiteYTEmbed.g=LiteYTEmbed.i()),LiteYTEmbed.g||(this.webp="no"),(t=document.createElement("picture")).className="lyt-poster-container","no"!==this.webp&&((i=document.createElement("source")).setAttribute("type","image/webp"),i.setAttribute("srcset","yes"===this.webp?`https://i.ytimg.com/vi_webp/${this.videoId}/${this.size}default.webp`:this.webp),t.appendChild(i)),this.T=document.createElement("img"),this.T.setAttribute("decoding","async"),this.T.setAttribute("loading","lazy"),this.L(),this.T.setAttribute("src",""!==this.jpg?this.jpg:`https://i.ytimg.com/vi/${this.videoId}/${this.size}default.jpg`),this.T.setAttribute("alt",this.t),this.T.setAttribute("title",this.t),this.T.className="lyt-poster",!0===window.LiteYTEmbedConfig?.useFallback&&(this.classList.add("lyt-poster-hidden"),this.Y=this.Y.bind(this),this.$=this.$.bind(this),this.T.complete&&this.Y(),this.T.addEventListener("load",this.Y),this.T.addEventListener("error",this.$)),t.appendChild(this.T),this.insertBefore(t,this.firstChild))}L(){let t,i;switch(this.size){case"mq":t=320,i=180;break;case"hq":t=480,i=360;break;case"sd":t=640,i=480;break;default:t=1280,i=720}this.T?.setAttribute("width",t.toString()),this.T?.setAttribute("height",i.toString())}k(){switch(this.size){case"maxres":return this.size="sd",!0;case"sd":return this.size="hq",!0}return!1}Y(){(this.T?.naturalWidth??0)<=120?this.$():this.classList.remove("lyt-poster-hidden")}$(){var t=this.querySelector("source");if(null!=t)return"yes"!==this.webp?(this.webp="yes",void t.setAttribute("srcset",`https://i.ytimg.com/vi_webp/${this.videoId}/${this.size}default.webp`)):this.k()?(this.L(),void t.setAttribute("srcset",`https://i.ytimg.com/vi_webp/${this.videoId}/${this.size}default.webp`)):(t.remove(),this.webp="no",void this.T?.setAttribute("src",`https://i.ytimg.com/vi/${this.videoId}/${this.size}default.jpg`));""!==this.jpg?(this.jpg="",this.T?.setAttribute("src",`https://i.ytimg.com/vi/${this.videoId}/${this.size}default.jpg`)):this.k()&&(this.L(),this.T?.setAttribute("src",`https://i.ytimg.com/vi/${this.videoId}/${this.size}default.jpg`))}async v(t){await this.P();var i=document.createElement("div"),s=(this.append(i),{width:"100%",host:"https://www.youtube-nocookie.com",events:{onReady:t=>{this.api=t.target,this.api.playVideo(),this.dispatchEvent(new CustomEvent("ready"))}}});""!==this.playlistId?(t.append("listType","playlist"),t.append("list",this.playlistId)):s.videoId=this.videoId,s.playerVars=Object.fromEntries(t.entries()),new YT.Player(i,s)}P(){if(void 0===window.YT)return new Promise((t,i)=>{var s=document.createElement("script");s.src="https://www.youtube.com/iframe_api",s.async=!0,s.onload=()=>{window.YT?.ready(t)},s.onerror=i,this.append(s)})}}LiteYTEmbed.o=!1,customElements.define("lite-youtube",LiteYTEmbed);
//# sourceMappingURL=lite-yt-embed.min.js.map